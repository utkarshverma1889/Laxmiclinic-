<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laxmi Clinic - Dr. Pramod Kumar Singh | Homeopathy Specialist</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Poppins', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-green { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
        .card-shadow { box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .pulse-dot { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .clinic-card:hover { transform: translateY(-5px); }
        
        /* Dark Mode Styles */
        .dark body { background-color: #1a1a2e; color: #eee; }
        .dark .bg-white { background-color: #16213e !important; }
        .dark .bg-gray-100 { background-color: #1a1a2e !important; }
        .dark .bg-gray-50 { background-color: #0f3460 !important; }
        .dark .bg-gray-800 { background-color: #0f0f23 !important; }
        .dark .text-gray-800, .dark .text-gray-700, .dark .text-gray-600 { color: #e0e0e0 !important; }
        .dark .text-gray-500, .dark .text-gray-400 { color: #a0a0a0 !important; }
        .dark .border-gray-200 { border-color: #2a2a4a !important; }
        .dark input, .dark select, .dark textarea { background-color: #0f3460 !important; color: #fff !important; border-color: #2a2a4a !important; }
        .dark .card-shadow { box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        
        /* Photo Gallery */
        .photo-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 12px; }
        .photo-item { position: relative; aspect-ratio: 1; overflow: hidden; border-radius: 12px; cursor: pointer; }
        .photo-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
        .photo-item:hover img { transform: scale(1.1); }
        .photo-overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.7), transparent); opacity: 0; transition: opacity 0.3s; display: flex; align-items: flex-end; justify-content: center; padding: 10px; }
        .photo-item:hover .photo-overlay { opacity: 1; }
        
        /* Lightbox */
        .lightbox { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000; display: none; align-items: center; justify-content: center; }
        .lightbox.active { display: flex; }
        .lightbox img { max-width: 90%; max-height: 90%; object-fit: contain; }
        
        /* Rating Stars */
        .star { cursor: pointer; transition: transform 0.2s; }
        .star:hover { transform: scale(1.2); }
        .star.filled { color: #fbbf24; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    
    <!-- Header -->
    <header class="gradient-bg text-white py-4 shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center flex-wrap gap-3">
                <div class="flex items-center gap-3">
                    <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center">
                        <span class="text-3xl">üè•</span>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold" id="clinicNameHeader">Laxmi Clinic</h1>
                        <p class="text-sm opacity-90" id="doctorNameHeader">Dr. Pramod Kumar Singh | Homeopathy</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <a href="tel:8726860517" id="headerHelpline" class="bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg text-sm transition flex items-center gap-1" title="Call Helpline">
                        üìû <span class="hidden sm:inline">Helpline</span>
                    </a>
                    <button onclick="openUserSettings()" class="bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg text-sm transition" title="Settings">
                        ‚öôÔ∏è
                    </button>
                    <button onclick="showManagerLogin()" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg text-sm transition">
                        üë®‚Äç‚öïÔ∏è Manager
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Doctor Info Banner -->
    <div class="bg-white border-b">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-wrap items-center justify-center gap-4 text-sm" id="doctorBadges">
                <span class="bg-purple-100 text-purple-700 px-3 py-1 rounded-full">üéì BHMS, MD (Homeopathy)</span>
                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full">ü¶¥ Liver & Bone Specialist</span>
                <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full">üè• 2 Clinic Locations</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        
        <!-- Navigation Tabs -->
        <div class="flex justify-center gap-2 mb-8 flex-wrap">
            <button onclick="showSection('booking')" id="tabBooking" class="tab-btn bg-purple-600 text-white px-4 py-2 rounded-full font-medium transition hover:scale-105 text-sm">
                üìÖ <span data-lang="bookAppointment">Book ‡§ï‡§∞‡•á‡§Ç</span>
            </button>
            <button onclick="showSection('status')" id="tabStatus" class="tab-btn bg-white text-gray-700 px-4 py-2 rounded-full font-medium transition hover:scale-105 text-sm">
                üîç <span data-lang="checkStatus">Status</span>
            </button>
            <button onclick="showSection('myAppointments')" id="tabMyAppointments" class="tab-btn bg-white text-gray-700 px-4 py-2 rounded-full font-medium transition hover:scale-105 text-sm">
                üìã <span data-lang="myAppointments">My Appointments</span>
            </button>
            <button onclick="showSection('gallery')" id="tabGallery" class="tab-btn bg-white text-gray-700 px-4 py-2 rounded-full font-medium transition hover:scale-105 text-sm">
                üì∏ <span data-lang="gallery">Gallery</span>
            </button>
            <button onclick="showSection('about')" id="tabAbout" class="tab-btn bg-white text-gray-700 px-4 py-2 rounded-full font-medium transition hover:scale-105 text-sm">
                ‚ÑπÔ∏è <span data-lang="clinicInfo">Info</span>
            </button>
        </div>

        <!-- Booking Section -->
        <section id="bookingSection" class="max-w-lg mx-auto">
            <div class="bg-white rounded-2xl card-shadow p-8">
                <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">üóìÔ∏è <span data-lang="bookAppointment">Appointment Book ‡§ï‡§∞‡•á‡§Ç</span></h2>
                
                <form id="appointmentForm" class="space-y-5">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">üë§ <span data-lang="yourName">‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ</span></label>
                        <input type="text" id="patientName" required placeholder="‡§Ö‡§™‡§®‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç" 
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition">
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">üì± Mobile Number</label>
                        <input type="tel" id="patientMobile" required placeholder="10 digit mobile number" pattern="[0-9]{10}"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition">
                    </div>

                    <!-- Clinic Selection -->
                    <div>
                        <label class="block text-gray-700 font-medium mb-3">üè• <span data-lang="selectClinic">Clinic ‡§ö‡•Å‡§®‡•á‡§Ç</span></label>
                        <div class="grid gap-3" id="clinicOptionsContainer">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">üìÜ <span data-lang="selectDate">Date ‡§ö‡•Å‡§®‡•á‡§Ç</span></label>
                        <input type="date" id="appointmentDate" required
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition">
                        <p id="dayWarning" class="text-red-500 text-sm mt-1 hidden"></p>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">‚è∞ <span data-lang="selectTime">Time Slot ‡§ö‡•Å‡§®‡•á‡§Ç</span></label>
                        <select id="appointmentTime" required
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition">
                            <option value="">-- ‡§™‡§π‡§≤‡•á Clinic ‡§ö‡•Å‡§®‡•á‡§Ç --</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">üìù <span data-lang="describeProblem">‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§¨‡§§‡§æ‡§è‡§Ç</span></label>
                        <textarea id="patientProblem" placeholder="‡§Ö‡§™‡§®‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§¨‡§§‡§æ‡§è‡§Ç (‡§ú‡•à‡§∏‡•á: Liver problem, Joint pain, Fever, etc.)" rows="3"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition resize-none"></textarea>
                    </div>

                    <!-- Photo Upload for Patient -->
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">üì∑ <span data-lang="attachPhoto">Photo/Report ‡§≠‡•á‡§ú‡•á‡§Ç (Optional)</span></label>
                        <input type="file" id="patientPhoto" accept="image/*" multiple
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition text-sm">
                        <p class="text-xs text-gray-500 mt-1">Reports, X-Ray, ‡§Ø‡§æ ‡§ï‡•ã‡§à photo attach ‡§ï‡§∞‡•á‡§Ç</p>
                        <div id="patientPhotoPreview" class="flex gap-2 mt-2 flex-wrap"></div>
                    </div>
                    
                    <button type="submit" class="w-full gradient-bg text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition transform hover:scale-[1.02]">
                        ‚úÖ <span data-lang="bookNow">Appointment Book ‡§ï‡§∞‡•á‡§Ç</span>
                    </button>
                </form>
            </div>
        </section>

        <!-- Status Check Section -->
        <section id="statusSection" class="max-w-lg mx-auto hidden">
            <div class="bg-white rounded-2xl card-shadow p-8">
                <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">üîç <span data-lang="checkStatus">Status Check ‡§ï‡§∞‡•á‡§Ç</span></h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">üì± <span data-lang="enterMobile">‡§Ö‡§™‡§®‡§æ Mobile Number ‡§°‡§æ‡§≤‡•á‡§Ç</span></label>
                        <input type="tel" id="checkMobile" placeholder="10 digit mobile number" pattern="[0-9]{10}"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition">
                    </div>
                    <button onclick="checkStatus()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition">
                        üîç <span data-lang="checkNow">Status Check ‡§ï‡§∞‡•á‡§Ç</span>
                    </button>
                </div>
                
                <div id="statusResult" class="mt-6 hidden"></div>
            </div>
        </section>

        <!-- My Appointments Section -->
        <section id="myAppointmentsSection" class="max-w-lg mx-auto hidden">
            <div class="bg-white rounded-2xl card-shadow p-8">
                <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">üìã <span data-lang="myAppointments">My Appointments</span></h2>
                
                <div class="space-y-4 mb-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">üì± Mobile Number</label>
                        <input type="tel" id="myAppointmentsMobile" placeholder="10 digit mobile number" pattern="[0-9]{10}"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition">
                    </div>
                    <button onclick="loadMyAppointments()" class="w-full bg-purple-600 text-white py-3 rounded-xl font-bold hover:bg-purple-700 transition">
                        üìã <span data-lang="viewAppointments">Appointments ‡§¶‡•á‡§ñ‡•á‡§Ç</span>
                    </button>
                </div>
                
                <div id="myAppointmentsList" class="space-y-4"></div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallerySection" class="max-w-4xl mx-auto hidden">
            <div class="bg-white rounded-2xl card-shadow p-6 mb-6">
                <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">üì∏ <span data-lang="gallery">Photo Gallery</span></h2>
                
                <!-- Gallery Tabs -->
                <div class="flex gap-2 mb-6 flex-wrap justify-center">
                    <button onclick="showGalleryTab('doctor')" class="gallery-tab bg-purple-600 text-white px-4 py-2 rounded-full text-sm font-medium">üë®‚Äç‚öïÔ∏è Doctor</button>
                    <button onclick="showGalleryTab('clinic')" class="gallery-tab bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm font-medium">üè• Clinic</button>
                    <button onclick="showGalleryTab('staff')" class="gallery-tab bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm font-medium">üë• Staff</button>
                    <button onclick="showGalleryTab('area')" class="gallery-tab bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm font-medium">üìç Area</button>
                </div>
                
                <!-- Doctor Photos -->
                <div id="galleryDoctor" class="gallery-content">
                    <div id="doctorPhotosGrid" class="photo-grid">
                        <div class="text-center text-gray-500 col-span-full py-8">
                            <span class="text-4xl">üë®‚Äç‚öïÔ∏è</span>
                            <p class="mt-2">Doctor photos ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§è‡§Ç‡§ó‡•Ä</p>
                        </div>
                    </div>
                </div>
                
                <!-- Clinic Photos -->
                <div id="galleryClinic" class="gallery-content hidden">
                    <div id="clinicPhotosGrid" class="photo-grid">
                        <div class="text-center text-gray-500 col-span-full py-8">
                            <span class="text-4xl">üè•</span>
                            <p class="mt-2">Clinic photos ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§è‡§Ç‡§ó‡•Ä</p>
                        </div>
                    </div>
                </div>
                
                <!-- Staff Photos -->
                <div id="galleryStaff" class="gallery-content hidden">
                    <div id="staffPhotosGrid" class="photo-grid">
                        <div class="text-center text-gray-500 col-span-full py-8">
                            <span class="text-4xl">üë•</span>
                            <p class="mt-2">Staff photos ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§è‡§Ç‡§ó‡•Ä</p>
                        </div>
                    </div>
                </div>
                
                <!-- Area Photos -->
                <div id="galleryArea" class="gallery-content hidden">
                    <div id="areaPhotosGrid" class="photo-grid">
                        <div class="text-center text-gray-500 col-span-full py-8">
                            <span class="text-4xl">üìç</span>
                            <p class="mt-2">Area photos ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§è‡§Ç‡§ó‡•Ä</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Send Photo to Manager -->
            <div class="bg-white rounded-2xl card-shadow p-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4">üì§ Manager ‡§ï‡•ã Photo ‡§≠‡•á‡§ú‡•á‡§Ç</h3>
                <p class="text-gray-600 text-sm mb-4">‡§Ö‡§™‡§®‡•Ä reports, X-Ray ‡§Ø‡§æ ‡§ï‡•ã‡§à ‡§≠‡•Ä photo Manager ‡§ï‡•ã ‡§≠‡•á‡§ú‡•á‡§Ç</p>
                
                <div class="space-y-4">
                    <input type="text" id="senderName" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                    <input type="tel" id="senderMobile" placeholder="Mobile Number" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                    <textarea id="photoMessage" placeholder="Message (optional)" rows="2" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none"></textarea>
                    <input type="file" id="sendPhotoFile" accept="image/*" multiple class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-sm">
                    <div id="sendPhotoPreview" class="flex gap-2 flex-wrap"></div>
                    <button onclick="sendPhotoToManager()" class="w-full bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 transition">
                        üì§ Photo ‡§≠‡•á‡§ú‡•á‡§Ç
                    </button>
                </div>
            </div>
        </section>

        <!-- About/Clinic Info Section -->
        <section id="aboutSection" class="max-w-4xl mx-auto hidden">
            <!-- Doctor Profile -->
            <div class="bg-white rounded-2xl card-shadow p-8 mb-6">
                <div class="flex flex-col md:flex-row items-center gap-6">
                    <div class="w-32 h-32 gradient-bg rounded-full flex items-center justify-center overflow-hidden" id="doctorProfilePhoto">
                        <span class="text-6xl">üë®‚Äç‚öïÔ∏è</span>
                    </div>
                    <div class="text-center md:text-left">
                        <h2 class="text-3xl font-bold text-gray-800" id="doctorNameDisplay">Dr. Pramod Kumar Singh</h2>
                        <p class="text-purple-600 font-semibold text-lg" id="qualificationDisplay">BHMS, MD (Homeopathy)</p>
                        <div class="flex flex-wrap gap-2 mt-3 justify-center md:justify-start" id="specializationBadges">
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm">ü¶¥ Bone Specialist</span>
                            <span class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-sm">ü´Å Liver Specialist</span>
                            <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm">ü§í General Treatment</span>
                        </div>
                        <p class="text-gray-600 mt-3" id="aboutDescription">Homeopathy ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á Liver, ‡§π‡§°‡•ç‡§°‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ, ‡§¨‡•Å‡§ñ‡§æ‡§∞ ‡§Ü‡§¶‡§ø ‡§ï‡§æ ‡§á‡§≤‡§æ‡§ú</p>
                    </div>
                </div>
            </div>

            <!-- Two Clinics -->
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <!-- Clinic 1 - Vinay Khand -->
                <div class="bg-white rounded-2xl card-shadow p-6">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                            <span class="text-2xl">üè•</span>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Clinic 1 - Vinay Khand</h3>
                            <p class="text-sm text-purple-600">Morning Clinic</p>
                        </div>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex items-start gap-3 p-3 bg-gray-50 rounded-xl">
                            <span class="text-xl">üìç</span>
                            <div>
                                <p class="font-medium text-gray-800">Address</p>
                                <p class="text-gray-600" id="clinic1AddressInfo">E1/577 Vinay Khand, Gomti Nagar, Lucknow</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 p-3 bg-green-50 rounded-xl">
                            <span class="text-xl">‚è∞</span>
                            <div>
                                <p class="font-medium text-gray-800">Timing</p>
                                <p class="text-green-600 font-semibold" id="clinic1TimingInfo">10:00 AM - 1:00 PM</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 p-3 bg-red-50 rounded-xl">
                            <span class="text-xl">üö´</span>
                            <div>
                                <p class="font-medium text-gray-800">Weekly Off</p>
                                <p class="text-red-600 font-semibold" id="clinic1OffInfo">Wednesday (‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞) ‡§¨‡§Ç‡§¶</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 rounded-xl overflow-hidden h-48" id="clinic1MapContainer">
                        <div class="w-full h-full bg-gray-200 flex items-center justify-center text-gray-500">
                            <span>üó∫Ô∏è Map will be added by manager</span>
                        </div>
                    </div>
                </div>

                <!-- Clinic 2 - Vibhav Khand -->
                <div class="bg-white rounded-2xl card-shadow p-6">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                            <span class="text-2xl">üè•</span>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Clinic 2 - Vibhav Khand</h3>
                            <p class="text-sm text-green-600">Evening Clinic</p>
                        </div>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex items-start gap-3 p-3 bg-gray-50 rounded-xl">
                            <span class="text-xl">üìç</span>
                            <div>
                                <p class="font-medium text-gray-800">Address</p>
                                <p class="text-gray-600" id="clinic2AddressInfo">2/44 Vibhav Khand, Gomti Nagar, Lucknow</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 p-3 bg-green-50 rounded-xl">
                            <span class="text-xl">‚è∞</span>
                            <div>
                                <p class="font-medium text-gray-800">Timing</p>
                                <p class="text-green-600 font-semibold" id="clinic2TimingInfo">4:00 PM - 7:00 PM</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 p-3 bg-red-50 rounded-xl">
                            <span class="text-xl">üö´</span>
                            <div>
                                <p class="font-medium text-gray-800">Weekly Off</p>
                                <p class="text-red-600 font-semibold" id="clinic2OffInfo">Sunday (‡§∞‡§µ‡§ø‡§µ‡§æ‡§∞) ‡§¨‡§Ç‡§¶</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 rounded-xl overflow-hidden h-48" id="clinic2MapContainer">
                        <div class="w-full h-full bg-gray-200 flex items-center justify-center text-gray-500">
                            <span>üó∫Ô∏è Map will be added by manager</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact & Reviews -->
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Contact -->
                <div class="bg-white rounded-2xl card-shadow p-6">
                    <h3 class="text-xl font-bold text-center mb-4">üìû Contact Us</h3>
                    <div class="space-y-3" id="contactButtonsContainer">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>

                <!-- Quick Review -->
                <div class="bg-white rounded-2xl card-shadow p-6">
                    <h3 class="text-xl font-bold text-center mb-4">‚≠ê Rate Us</h3>
                    <div class="text-center">
                        <div class="flex justify-center gap-2 mb-4" id="ratingStars">
                            <span class="star text-3xl text-gray-300" data-rating="1">‚òÖ</span>
                            <span class="star text-3xl text-gray-300" data-rating="2">‚òÖ</span>
                            <span class="star text-3xl text-gray-300" data-rating="3">‚òÖ</span>
                            <span class="star text-3xl text-gray-300" data-rating="4">‚òÖ</span>
                            <span class="star text-3xl text-gray-300" data-rating="5">‚òÖ</span>
                        </div>
                        <p class="text-gray-600 text-sm" id="ratingText">Tap stars to rate</p>
                        <div class="mt-3 hidden" id="reviewForm">
                            <textarea id="reviewText" placeholder="‡§Ö‡§™‡§®‡§æ review ‡§≤‡§ø‡§ñ‡•á‡§Ç..." rows="2" class="w-full px-3 py-2 border rounded-lg text-sm mb-2"></textarea>
                            <button onclick="submitReview()" class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm">Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-lg font-semibold">üè• Laxmi Clinic</p>
            <p class="text-gray-400" id="footerDoctorName">Dr. Pramod Kumar Singh - Homeopathy Specialist</p>
            <p class="text-gray-500 text-sm mt-2">üìû Manager's Helpline: <span id="footerHelpline">8726860517</span></p>
        </div>
    </footer>

    <!-- Lightbox for Photos -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <button class="absolute top-4 right-4 text-white text-3xl">&times;</button>
        <button class="absolute top-1/2 left-4 text-white text-3xl" onclick="event.stopPropagation(); prevPhoto()">‚ùÆ</button>
        <img id="lightboxImg" src="" alt="">
        <button class="absolute top-1/2 right-4 text-white text-3xl" onclick="event.stopPropagation(); nextPhoto()">‚ùØ</button>
        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-3">
            <button onclick="event.stopPropagation(); downloadPhoto()" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg">
                ‚¨áÔ∏è Download
            </button>
        </div>
    </div>

    <!-- User Settings Modal -->
    <div id="userSettingsModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 card-shadow max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">‚öôÔ∏è Settings</h3>
                <button onclick="closeUserSettings()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <div class="space-y-6">
                <!-- Dark Mode Toggle -->
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">üåô</span>
                        <div>
                            <p class="font-medium text-gray-800">Dark Mode</p>
                            <p class="text-sm text-gray-500">‡§Ü‡§Ç‡§ñ‡•ã‡§Ç ‡§ï‡•ã ‡§Ü‡§∞‡§æ‡§Æ ‡§¶‡•á‡§Ç</p>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="darkModeToggle" class="sr-only peer" onchange="toggleDarkMode()">
                        <div class="w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                    </label>
                </div>
                
                <!-- Language Selection -->
                <div class="p-4 bg-gray-50 rounded-xl">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-2xl">üåê</span>
                        <div>
                            <p class="font-medium text-gray-800">Language / ‡§≠‡§æ‡§∑‡§æ</p>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="changeLanguage('hi')" id="langHi" class="flex-1 py-2 rounded-lg font-medium transition bg-purple-600 text-white">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
                        <button onclick="changeLanguage('en')" id="langEn" class="flex-1 py-2 rounded-lg font-medium transition bg-gray-200 text-gray-700">English</button>
                    </div>
                </div>
                
                <!-- Notification Permission -->
                <div class="p-4 bg-gray-50 rounded-xl">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-2xl">üîî</span>
                        <div>
                            <p class="font-medium text-gray-800">Notifications</p>
                            <p class="text-sm text-gray-500">Status updates ‡§™‡§æ‡§è‡§Ç</p>
                        </div>
                    </div>
                    <button onclick="requestNotificationPermission()" id="notifBtn" class="w-full py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition">
                        üîî Enable Notifications
                    </button>
                </div>

                <!-- Helpline -->
                <div class="p-4 bg-green-50 rounded-xl">
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">üìû</span>
                        <div class="flex-1">
                            <p class="font-medium text-gray-800">Manager's Helpline</p>
                            <p class="text-green-600 font-bold text-lg" id="settingsHelpline">8726860517</p>
                        </div>
                        <a href="tel:8726860517" id="settingsCallBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg">Call</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Manager Login Modal -->
    <div id="managerLoginModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 card-shadow">
            <h3 class="text-2xl font-bold text-center mb-6">üîê Manager Login</h3>
            <div class="space-y-4">
                <input type="password" id="managerPassword" placeholder="Password ‡§°‡§æ‡§≤‡•á‡§Ç" 
                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                <div class="flex gap-3">
                    <button onclick="closeManagerLogin()" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-300 transition">Cancel</button>
                    <button onclick="loginManager()" class="flex-1 gradient-bg text-white py-3 rounded-xl font-medium hover:opacity-90 transition">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Manager Dashboard Modal -->
    <div id="managerDashboard" class="fixed inset-0 bg-gray-100 z-50 hidden overflow-auto">
        <div class="gradient-bg text-white py-4 shadow-lg sticky top-0 z-10">
            <div class="container mx-auto px-4 flex justify-between items-center flex-wrap gap-3">
                <h2 class="text-xl font-bold">üë®‚Äç‚öïÔ∏è Manager Dashboard</h2>
                <button onclick="closeManagerDashboard()" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition">
                    ‚úñ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
                </button>
            </div>
        </div>
        
        <div class="container mx-auto px-4 py-6">
            <!-- Dashboard Tabs -->
            <div class="flex gap-2 mb-6 flex-wrap">
                <button onclick="showDashboardTab('appointments')" id="dashTabAppointments" class="dash-tab bg-purple-600 text-white px-3 py-2 rounded-full font-medium transition text-sm">
                    üìã Appointments
                </button>
                <button onclick="showDashboardTab('photos')" id="dashTabPhotos" class="dash-tab bg-white text-gray-700 px-3 py-2 rounded-full font-medium transition text-sm">
                    üì∏ Photos
                </button>
                <button onclick="showDashboardTab('patientPhotos')" id="dashTabPatientPhotos" class="dash-tab bg-white text-gray-700 px-3 py-2 rounded-full font-medium transition text-sm">
                    üì• Patient Photos
                </button>
                <button onclick="showDashboardTab('broadcast')" id="dashTabBroadcast" class="dash-tab bg-white text-gray-700 px-3 py-2 rounded-full font-medium transition text-sm">
                    üì¢ Broadcast
                </button>
                <button onclick="showDashboardTab('settings')" id="dashTabSettings" class="dash-tab bg-white text-gray-700 px-3 py-2 rounded-full font-medium transition text-sm">
                    ‚öôÔ∏è Settings
                </button>
            </div>

            <!-- Filter by Clinic -->
            <div id="clinicFilter" class="mb-4 flex gap-2 flex-wrap">
                <button onclick="filterAppointments('all')" class="filter-btn bg-purple-600 text-white px-4 py-2 rounded-lg text-sm">All</button>
                <button onclick="filterAppointments('vinay_khand')" class="filter-btn bg-white text-gray-700 px-4 py-2 rounded-lg text-sm">Vinay Khand</button>
                <button onclick="filterAppointments('vibhav_khand')" class="filter-btn bg-white text-gray-700 px-4 py-2 rounded-lg text-sm">Vibhav Khand</button>
            </div>
            
            <!-- Appointments Tab -->
            <div id="appointmentsTab">
                <!-- Slot Status -->
                <div class="grid md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-white rounded-xl p-4 card-shadow">
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="font-bold text-gray-800">üè• Vinay Khand (Morning)</h4>
                                <p class="text-sm text-gray-600">Today's Status</p>
                            </div>
                            <button onclick="toggleSlotFull('vinay_khand')" id="vinaySlotBtn" class="px-4 py-2 rounded-lg text-sm font-medium bg-green-100 text-green-700">
                                ‚úÖ Available
                            </button>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-4 card-shadow">
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="font-bold text-gray-800">üè• Vibhav Khand (Evening)</h4>
                                <p class="text-sm text-gray-600">Today's Status</p>
                            </div>
                            <button onclick="toggleSlotFull('vibhav_khand')" id="vibhavSlotBtn" class="px-4 py-2 rounded-lg text-sm font-medium bg-green-100 text-green-700">
                                ‚úÖ Available
                            </button>
                        </div>
                    </div>
                </div>

                <div class="grid gap-4" id="appointmentsList">
                    <!-- Appointments will be loaded here -->
                </div>
            </div>

            <!-- Photos Management Tab -->
            <div id="photosTab" class="hidden">
                <div class="bg-white rounded-2xl card-shadow p-6 max-w-2xl">
                    <h3 class="text-xl font-bold mb-6">üì∏ Gallery Management</h3>
                    
                    <div class="space-y-6">
                        <!-- Doctor Photos -->
                        <div class="border-2 border-dashed border-gray-300 rounded-xl p-4">
                            <h4 class="font-bold text-gray-800 mb-3">üë®‚Äç‚öïÔ∏è Doctor Photos</h4>
                            <input type="file" id="uploadDoctorPhoto" accept="image/*" multiple onchange="uploadGalleryPhoto('doctor')" class="w-full text-sm">
                            <div id="doctorPhotosList" class="photo-grid mt-3"></div>
                        </div>

                        <!-- Clinic Photos -->
                        <div class="border-2 border-dashed border-gray-300 rounded-xl p-4">
                            <h4 class="font-bold text-gray-800 mb-3">üè• Clinic Photos</h4>
                            <input type="file" id="uploadClinicPhoto" accept="image/*" multiple onchange="uploadGalleryPhoto('clinic')" class="w-full text-sm">
                            <div id="clinicPhotosList" class="photo-grid mt-3"></div>
                        </div>

                        <!-- Staff Photos -->
                        <div class="border-2 border-dashed border-gray-300 rounded-xl p-4">
                            <h4 class="font-bold text-gray-800 mb-3">üë• Staff Photos</h4>
                            <input type="file" id="uploadStaffPhoto" accept="image/*" multiple onchange="uploadGalleryPhoto('staff')" class="w-full text-sm">
                            <div id="staffPhotosList" class="photo-grid mt-3"></div>
                        </div>

                        <!-- Area Photos -->
                        <div class="border-2 border-dashed border-gray-300 rounded-xl p-4">
                            <h4 class="font-bold text-gray-800 mb-3">üìç Area Photos</h4>
                            <input type="file" id="uploadAreaPhoto" accept="image/*" multiple onchange="uploadGalleryPhoto('area')" class="w-full text-sm">
                            <div id="areaPhotosList" class="photo-grid mt-3"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Patient Photos Tab -->
            <div id="patientPhotosTab" class="hidden">
                <div class="bg-white rounded-2xl card-shadow p-6">
                    <h3 class="text-xl font-bold mb-6">üì• Patients ‡§∏‡•á ‡§Ü‡§à Photos</h3>
                    <div id="patientPhotosList" class="space-y-4">
                        <p class="text-gray-500 text-center py-8">‡§ï‡•ã‡§à photo ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§à ‡§π‡•à</p>
                    </div>

                    <hr class="my-6">

                    <!-- Send Photo to Patient -->
                    <h3 class="text-xl font-bold mb-4">üì§ Patient ‡§ï‡•ã Photo ‡§≠‡•á‡§ú‡•á‡§Ç</h3>
                    <div class="space-y-4">
                        <input type="tel" id="sendToPatientMobile" placeholder="Patient ‡§ï‡§æ Mobile Number" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        <textarea id="sendToPatientMessage" placeholder="Message (optional)" rows="2" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none"></textarea>
                        <input type="file" id="sendToPatientFile" accept="image/*" multiple class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-sm">
                        <div id="sendToPatientPreview" class="flex gap-2 flex-wrap"></div>
                        <button onclick="sendPhotoToPatient()" class="w-full bg-purple-600 text-white py-3 rounded-xl font-bold hover:bg-purple-700 transition">
                            üì§ Photo ‡§≠‡•á‡§ú‡•á‡§Ç
                        </button>
                    </div>
                </div>
            </div>

            <!-- Broadcast Tab -->
            <div id="broadcastTab" class="hidden">
                <div class="bg-white rounded-2xl card-shadow p-6 max-w-2xl">
                    <h3 class="text-xl font-bold mb-6">üì¢ Broadcast Notification</h3>
                    <p class="text-gray-600 mb-4">‡§∏‡§≠‡•Ä ‡§Æ‡§∞‡•Ä‡§ú‡§º‡•ã‡§Ç ‡§ï‡•ã ‡§è‡§ï ‡§∏‡§æ‡§• notification ‡§≠‡•á‡§ú‡•á‡§Ç</p>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üìù Message Title</label>
                            <input type="text" id="broadcastTitle" placeholder="‡§ú‡•à‡§∏‡•á: Clinic Holiday Notice"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üí¨ Message</label>
                            <textarea id="broadcastMessage" placeholder="‡§Ö‡§™‡§®‡§æ message ‡§≤‡§ø‡§ñ‡•á‡§Ç..." rows="4"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none"></textarea>
                        </div>
                        <button onclick="sendBroadcastNotification()" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-xl font-bold transition">
                            üì¢ ‡§∏‡§≠‡•Ä ‡§ï‡•ã Notification ‡§≠‡•á‡§ú‡•á‡§Ç
                        </button>
                    </div>
                    
                    <div class="mt-6 p-4 bg-gray-50 rounded-xl">
                        <h4 class="font-medium mb-2">üìä Patient Stats</h4>
                        <p class="text-gray-600">Total Unique Patients: <span id="totalPatients" class="font-bold text-purple-600">0</span></p>
                    </div>
                </div>
            </div>
            
            <!-- Settings Tab -->
            <div id="settingsTab" class="hidden">
                <div class="bg-white rounded-2xl card-shadow p-6 max-w-2xl">
                    <h3 class="text-xl font-bold mb-6">‚öôÔ∏è Clinic Settings</h3>
                    
                    <form id="settingsForm" class="space-y-4">
                        <h4 class="font-bold text-gray-800 border-b pb-2">üë®‚Äç‚öïÔ∏è Doctor Details</h4>
                        
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Doctor Name</label>
                            <input type="text" id="settingDoctorName" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üéì Qualification</label>
                            <input type="text" id="settingQualification" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üíä Specialization</label>
                            <input type="text" id="settingSpecialization" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üìù About/Description</label>
                            <textarea id="settingAbout" rows="2"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none"></textarea>
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üì± Doctor Mobile (Optional)</label>
                            <input type="text" id="settingDoctorMobile" placeholder="Doctor ‡§ï‡§æ personal number"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <hr class="my-4">
                        <h4 class="font-bold text-gray-800">üè• Clinic 1 - Vinay Khand</h4>
                        
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üìç Address</label>
                            <input type="text" id="settingAddress1" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">‚è∞ Timing</label>
                            <input type="text" id="settingTiming1" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üö´ Off Day</label>
                            <input type="text" id="settingOff1" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üó∫Ô∏è Google Map Embed URL</label>
                            <input type="text" id="settingMap1" placeholder="Google Maps embed link paste ‡§ï‡§∞‡•á‡§Ç"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                            <p class="text-xs text-gray-500 mt-1">Google Maps ‚Üí Share ‚Üí Embed a map ‚Üí Copy src URL</p>
                        </div>

                        <hr class="my-4">
                        <h4 class="font-bold text-gray-800">üè• Clinic 2 - Vibhav Khand</h4>
                        
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üìç Address</label>
                            <input type="text" id="settingAddress2" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">‚è∞ Timing</label>
                            <input type="text" id="settingTiming2" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üö´ Off Day</label>
                            <input type="text" id="settingOff2" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üó∫Ô∏è Google Map Embed URL</label>
                            <input type="text" id="settingMap2" placeholder="Google Maps embed link paste ‡§ï‡§∞‡•á‡§Ç"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <hr class="my-4">
                        <h4 class="font-bold text-gray-800">üìû Contact Details</h4>
                        
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üìû Manager's Helpline Number</label>
                            <input type="text" id="settingHelpline" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üì± Clinic Contact Number (Optional)</label>
                            <input type="text" id="settingClinicContact" placeholder="Alternative contact number"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üìß Email (Optional)</label>
                            <input type="email" id="settingEmail" placeholder="clinic@example.com"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>

                        <hr class="my-4">
                        <h4 class="font-bold text-gray-800">üîê Security</h4>
                        
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">üîê New Password (optional)</label>
                            <input type="password" id="settingPassword" placeholder="‡§®‡§Ø‡§æ password ‡§°‡§æ‡§≤‡•á‡§Ç"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        </div>
                        
                        <button type="submit" class="w-full gradient-bg text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                            üíæ Save Changes
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Approve/Reject Modal -->
    <div id="actionModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-[60] hidden">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 card-shadow">
            <h3 id="actionModalTitle" class="text-xl font-bold mb-4">‚úÖ Approve Appointment</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-gray-700 font-medium mb-2" id="actionModalLabel">üìù Important Note (Optional)</label>
                    <textarea id="actionNote" placeholder="‡§ú‡•à‡§∏‡•á: ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•Å‡§¨‡§π ‡§ñ‡§æ‡§≤‡•Ä ‡§™‡•á‡§ü ‡§Ü‡§è‡§Ç..." rows="3"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none"></textarea>
                </div>
                <div class="flex gap-3">
                    <button onclick="closeActionModal()" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-300 transition">Cancel</button>
                    <button onclick="confirmAction()" id="actionModalBtn" class="flex-1 bg-green-500 text-white py-3 rounded-xl font-medium hover:bg-green-600 transition">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Appointment Modal -->
    <div id="editAppointmentModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 card-shadow max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">‚úèÔ∏è Edit Appointment</h3>
                <button onclick="closeEditModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <form id="editAppointmentForm" class="space-y-4">
                <input type="hidden" id="editAppointmentId">
                <div>
                    <label class="block text-gray-700 font-medium mb-2">üë§ Name</label>
                    <input type="text" id="editName" required
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">üìÜ Date</label>
                    <input type="date" id="editDate" required
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">‚è∞ Time</label>
                    <input type="text" id="editTime" required
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">üìù Problem</label>
                    <textarea id="editProblem" rows="2"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none"></textarea>
                </div>
                <button type="submit" class="w-full gradient-bg text-white py-3 rounded-xl font-bold hover:opacity-90 transition">
                    üíæ Save Changes
                </button>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 card-shadow text-center">
            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <span class="text-5xl">‚úÖ</span>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">Appointment Booked!</h3>
            <p class="text-gray-600 mb-2">‡§Ü‡§™‡§ï‡•Ä appointment request ‡§≠‡•á‡§ú ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à‡•§</p>
            <p class="text-sm text-gray-500 mb-2">Booking ID: <span id="bookingId" class="font-bold text-purple-600"></span></p>
            <p class="text-sm text-gray-500 mb-4" id="successClinicInfo"></p>
            <p class="text-sm text-gray-500 mb-6">Status check ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡§æ mobile number use ‡§ï‡§∞‡•á‡§Ç‡•§</p>
            <button onclick="closeSuccessModal()" class="gradient-bg text-white px-8 py-3 rounded-xl font-medium hover:opacity-90 transition">
                ‡§†‡•Ä‡§ï ‡§π‡•à
            </button>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notificationToast" class="fixed top-4 right-4 bg-white rounded-xl shadow-2xl p-4 max-w-sm transform translate-x-full transition-transform duration-300 z-[100]">
        <div class="flex items-start gap-3">
            <span class="text-2xl" id="toastIcon">üîî</span>
            <div>
                <p class="font-bold text-gray-800" id="toastTitle">Notification</p>
                <p class="text-sm text-gray-600" id="toastMessage">Message here</p>
            </div>
            <button onclick="hideToast()" class="text-gray-400 hover:text-gray-600">&times;</button>
        </div>
    </div>

    <script>
        // Language Translations
        const translations = {
            hi: {
                bookAppointment: "Book ‡§ï‡§∞‡•á‡§Ç",
                checkStatus: "Status",
                myAppointments: "My Appointments",
                clinicInfo: "Info",
                gallery: "Gallery",
                yourName: "‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ",
                selectClinic: "Clinic ‡§ö‡•Å‡§®‡•á‡§Ç",
                selectDate: "Date ‡§ö‡•Å‡§®‡•á‡§Ç",
                selectTime: "Time Slot ‡§ö‡•Å‡§®‡•á‡§Ç",
                describeProblem: "‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§¨‡§§‡§æ‡§è‡§Ç",
                attachPhoto: "Photo/Report ‡§≠‡•á‡§ú‡•á‡§Ç (Optional)",
                bookNow: "Appointment Book ‡§ï‡§∞‡•á‡§Ç",
                enterMobile: "‡§Ö‡§™‡§®‡§æ Mobile Number ‡§°‡§æ‡§≤‡•á‡§Ç",
                checkNow: "Status Check ‡§ï‡§∞‡•á‡§Ç",
                viewAppointments: "Appointments ‡§¶‡•á‡§ñ‡•á‡§Ç"
            },
            en: {
                bookAppointment: "Book",
                checkStatus: "Status",
                myAppointments: "My Appointments",
                clinicInfo: "Info",
                gallery: "Gallery",
                yourName: "Your Name",
                selectClinic: "Select Clinic",
                selectDate: "Select Date",
                selectTime: "Select Time Slot",
                describeProblem: "Describe Problem",
                attachPhoto: "Attach Photo/Report (Optional)",
                bookNow: "Book Appointment",
                enterMobile: "Enter Your Mobile Number",
                checkNow: "Check Status",
                viewAppointments: "View Appointments"
            }
        };

        // Initialize Data
        let clinicData = JSON.parse(localStorage.getItem('laxmiClinicData')) || {
            doctorName: 'Dr. Pramod Kumar Singh',
            qualification: 'BHMS, MD (Homeopathy)',
            specialization: 'Liver & Bone Specialist',
            about: 'Homeopathy ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á Liver, ‡§π‡§°‡•ç‡§°‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ, ‡§¨‡•Å‡§ñ‡§æ‡§∞ ‡§Ü‡§¶‡§ø ‡§ï‡§æ ‡§á‡§≤‡§æ‡§ú',
            doctorMobile: '',
            clinic1: {
                name: 'Vinay Khand',
                address: 'E1/577 Vinay Khand, Gomti Nagar, Lucknow',
                timing: '10:00 AM - 1:00 PM',
                offDay: 'Wednesday',
                offDayNum: 3,
                mapUrl: '',
                isFull: false
            },
            clinic2: {
                name: 'Vibhav Khand',
                address: '2/44 Vibhav Khand, Gomti Nagar, Lucknow',
                timing: '4:00 PM - 7:00 PM',
                offDay: 'Sunday',
                offDayNum: 0,
                mapUrl: '',
                isFull: false
            },
            helpline: '8726860517',
            clinicContact: '',
            email: '',
            password: 'admin123'
        };

        let appointments = JSON.parse(localStorage.getItem('laxmiClinicAppointments')) || [];
        let galleryPhotos = JSON.parse(localStorage.getItem('laxmiClinicGallery')) || { doctor: [], clinic: [], staff: [], area: [] };
        let patientPhotos = JSON.parse(localStorage.getItem('laxmiClinicPatientPhotos')) || [];
        let reviews = JSON.parse(localStorage.getItem('laxmiClinicReviews')) || [];
        
        let currentFilter = 'all';
        let currentAction = { type: '', id: '' };
        let currentLang = localStorage.getItem('laxmiClinicLang') || 'hi';
        let isDarkMode = localStorage.getItem('laxmiClinicDark') === 'true';
        let currentLightboxPhotos = [];
        let currentLightboxIndex = 0;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            document.getElementById('appointmentDate').min = new Date().toISOString().split('T')[0];
            
            if (isDarkMode) {
                document.documentElement.classList.add('dark');
                document.getElementById('darkModeToggle').checked = true;
            }
            
            changeLanguage(currentLang);
            updateUIFromData();
            updateClinicOptions();
            checkNotificationStatus();
            loadGalleryPhotos();
            setupRatingStars();
            setupFilePreview();
        }

        function updateUIFromData() {
            // Update helpline
            document.getElementById('footerHelpline').textContent = clinicData.helpline;
            document.getElementById('headerHelpline').href = 'tel:' + clinicData.helpline;
            document.getElementById('settingsHelpline').textContent = clinicData.helpline;
            document.getElementById('settingsCallBtn').href = 'tel:' + clinicData.helpline;
            
            // Update doctor info
            document.getElementById('doctorNameHeader').textContent = clinicData.doctorName + ' | Homeopathy';
            document.getElementById('doctorNameDisplay').textContent = clinicData.doctorName;
            document.getElementById('qualificationDisplay').textContent = clinicData.qualification;
            document.getElementById('aboutDescription').textContent = clinicData.about;
            document.getElementById('footerDoctorName').textContent = clinicData.doctorName + ' - Homeopathy Specialist';
            
            // Update clinic info
            document.getElementById('clinic1AddressInfo').textContent = clinicData.clinic1.address;
            document.getElementById('clinic1TimingInfo').textContent = clinicData.clinic1.timing;
            document.getElementById('clinic1OffInfo').textContent = clinicData.clinic1.offDay + ' ‡§¨‡§Ç‡§¶';
            
            document.getElementById('clinic2AddressInfo').textContent = clinicData.clinic2.address;
            document.getElementById('clinic2TimingInfo').textContent = clinicData.clinic2.timing;
            document.getElementById('clinic2OffInfo').textContent = clinicData.clinic2.offDay + ' ‡§¨‡§Ç‡§¶';
            
            // Update maps
            if (clinicData.clinic1.mapUrl) {
                document.getElementById('clinic1MapContainer').innerHTML = `<iframe src="${clinicData.clinic1.mapUrl}" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>`;
            }
            if (clinicData.clinic2.mapUrl) {
                document.getElementById('clinic2MapContainer').innerHTML = `<iframe src="${clinicData.clinic2.mapUrl}" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>`;
            }
            
            updateContactButtons();
            updateSlotButtons();
        }

        function updateClinicOptions() {
            const container = document.getElementById('clinicOptionsContainer');
            const clinic1Full = clinicData.clinic1.isFull;
            const clinic2Full = clinicData.clinic2.isFull;
            
            container.innerHTML = `
                <label class="clinic-card cursor-pointer block p-4 border-2 ${clinic1Full ? 'border-red-300 bg-red-50' : 'border-gray-200'} rounded-xl hover:border-purple-500 transition-all duration-300 has-[:checked]:border-purple-500 has-[:checked]:bg-purple-50 ${clinic1Full ? 'opacity-60' : ''}">
                    <input type="radio" name="clinicSelect" value="vinay_khand" ${clinic1Full ? 'disabled' : ''} required class="hidden">
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">üè•</span>
                        <div class="flex-1">
                            <div class="flex items-center gap-2">
                                <h4 class="font-bold text-gray-800">Vinay Khand Clinic</h4>
                                ${clinic1Full ? '<span class="bg-red-500 text-white text-xs px-2 py-1 rounded-full">üö´ FULL</span>' : ''}
                            </div>
                            <p class="text-sm text-gray-600">üìç ${clinicData.clinic1.address}</p>
                            <p class="text-sm text-green-600">‚è∞ ${clinicData.clinic1.timing}</p>
                            <p class="text-sm text-red-500">üö´ ${clinicData.clinic1.offDay} ‡§¨‡§Ç‡§¶</p>
                        </div>
                    </div>
                </label>
                <label class="clinic-card cursor-pointer block p-4 border-2 ${clinic2Full ? 'border-red-300 bg-red-50' : 'border-gray-200'} rounded-xl hover:border-purple-500 transition-all duration-300 has-[:checked]:border-purple-500 has-[:checked]:bg-purple-50 ${clinic2Full ? 'opacity-60' : ''}">
                    <input type="radio" name="clinicSelect" value="vibhav_khand" ${clinic2Full ? 'disabled' : ''} required class="hidden">
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">üè•</span>
                        <div class="flex-1">
                            <div class="flex items-center gap-2">
                                <h4 class="font-bold text-gray-800">Vibhav Khand Clinic</h4>
                                ${clinic2Full ? '<span class="bg-red-500 text-white text-xs px-2 py-1 rounded-full">üö´ FULL</span>' : ''}
                            </div>
                            <p class="text-sm text-gray-600">üìç ${clinicData.clinic2.address}</p>
                            <p class="text-sm text-green-600">‚è∞ ${clinicData.clinic2.timing}</p>
                            <p class="text-sm text-red-500">üö´ ${clinicData.clinic2.offDay} ‡§¨‡§Ç‡§¶</p>
                        </div>
                    </div>
                </label>
            `;
            
            // Re-attach event listeners
            document.querySelectorAll('input[name="clinicSelect"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    updateTimeSlots(this.value);
                    checkDateValidity();
                });
            });
        }

        function updateSlotButtons() {
            const vinayBtn = document.getElementById('vinaySlotBtn');
            const vibhavBtn = document.getElementById('vibhavSlotBtn');
            
            if (vinayBtn) {
                if (clinicData.clinic1.isFull) {
                    vinayBtn.className = 'px-4 py-2 rounded-lg text-sm font-medium bg-red-100 text-red-700';
                    vinayBtn.innerHTML = 'üö´ FULL';
                } else {
                    vinayBtn.className = 'px-4 py-2 rounded-lg text-sm font-medium bg-green-100 text-green-700';
                    vinayBtn.innerHTML = '‚úÖ Available';
                }
            }
            
            if (vibhavBtn) {
                if (clinicData.clinic2.isFull) {
                    vibhavBtn.className = 'px-4 py-2 rounded-lg text-sm font-medium bg-red-100 text-red-700';
                    vibhavBtn.innerHTML = 'üö´ FULL';
                } else {
                    vibhavBtn.className = 'px-4 py-2 rounded-lg text-sm font-medium bg-green-100 text-green-700';
                    vibhavBtn.innerHTML = '‚úÖ Available';
                }
            }
        }

        function toggleSlotFull(clinic) {
            if (clinic === 'vinay_khand') {
                clinicData.clinic1.isFull = !clinicData.clinic1.isFull;
            } else {
                clinicData.clinic2.isFull = !clinicData.clinic2.isFull;
            }
            localStorage.setItem('laxmiClinicData', JSON.stringify(clinicData));
            updateSlotButtons();
            updateClinicOptions();
            showToast('‚úÖ', 'Updated!', 'Slot status updated');
        }

        function updateContactButtons() {
            let html = `
                <a href="tel:${clinicData.helpline}" class="flex items-center gap-3 bg-green-100 hover:bg-green-200 px-4 py-3 rounded-xl transition">
                    <span class="text-2xl">üìû</span>
                    <div>
                        <p class="text-xs text-gray-600">Manager's Helpline</p>
                        <p class="font-bold text-green-700">${clinicData.helpline}</p>
                    </div>
                </a>
                <a href="https://wa.me/91${clinicData.helpline}" target="_blank" class="flex items-center gap-3 bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-xl transition">
                    <span class="text-2xl">üí¨</span>
                    <div>
                        <p class="text-xs opacity-90">WhatsApp</p>
                        <p class="font-bold">Message ‡§ï‡§∞‡•á‡§Ç</p>
                    </div>
                </a>
            `;
            
            if (clinicData.clinicContact) {
                html += `
                    <a href="tel:${clinicData.clinicContact}" class="flex items-center gap-3 bg-blue-100 hover:bg-blue-200 px-4 py-3 rounded-xl transition">
                        <span class="text-2xl">üì±</span>
                        <div>
                            <p class="text-xs text-gray-600">Clinic Contact</p>
                            <p class="font-bold text-blue-700">${clinicData.clinicContact}</p>
                        </div>
                    </a>
                `;
            }
            
            document.getElementById('contactButtonsContainer').innerHTML = html;
        }

        // File Preview
        function setupFilePreview() {
            document.getElementById('patientPhoto').addEventListener('change', function() {
                previewFiles(this.files, 'patientPhotoPreview');
            });
            
            document.getElementById('sendPhotoFile').addEventListener('change', function() {
                previewFiles(this.files, 'sendPhotoPreview');
            });
        }

        function previewFiles(files, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'w-16 h-16 object-cover rounded-lg';
                    container.appendChild(img);
                };
                reader.readAsDataURL(file);
            });
        }

        // Rating Stars
        function setupRatingStars() {
            document.querySelectorAll('#ratingStars .star').forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.dataset.rating);
                    document.querySelectorAll('#ratingStars .star').forEach((s, i) => {
                        s.classList.toggle('filled', i < rating);
                        s.classList.toggle('text-gray-300', i >= rating);
                    });
                    document.getElementById('ratingText').textContent = `${rating} Stars - Thank you!`;
                    document.getElementById('reviewForm').classList.remove('hidden');
                });
            });
        }

        function submitReview() {
            const rating = document.querySelectorAll('#ratingStars .star.filled').length;
            const text = document.getElementById('reviewText').value;
            
            if (rating > 0) {
                reviews.push({ rating, text, date: new Date().toISOString() });
                localStorage.setItem('laxmiClinicReviews', JSON.stringify(reviews));
                showToast('‚≠ê', 'Thank You!', 'Your review has been submitted');
                document.getElementById('reviewForm').classList.add('hidden');
                document.getElementById('reviewText').value = '';
            }
        }

        // Dark Mode
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.documentElement.classList.toggle('dark', isDarkMode);
            localStorage.setItem('laxmiClinicDark', isDarkMode);
        }

        // Language
        function changeLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('laxmiClinicLang', lang);
            
            document.querySelectorAll('[data-lang]').forEach(el => {
                const key = el.getAttribute('data-lang');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            
            document.getElementById('langHi').classList.toggle('bg-purple-600', lang === 'hi');
            document.getElementById('langHi').classList.toggle('text-white', lang === 'hi');
            document.getElementById('langHi').classList.toggle('bg-gray-200', lang !== 'hi');
            document.getElementById('langHi').classList.toggle('text-gray-700', lang !== 'hi');
            
            document.getElementById('langEn').classList.toggle('bg-purple-600', lang === 'en');
            document.getElementById('langEn').classList.toggle('text-white', lang === 'en');
            document.getElementById('langEn').classList.toggle('bg-gray-200', lang !== 'en');
            document.getElementById('langEn').classList.toggle('text-gray-700', lang !== 'en');
        }

        // Notifications
        function checkNotificationStatus() {
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    document.getElementById('notifBtn').textContent = '‚úÖ Notifications Enabled';
                    document.getElementById('notifBtn').disabled = true;
                    document.getElementById('notifBtn').classList.remove('bg-blue-600', 'hover:bg-blue-700');
                    document.getElementById('notifBtn').classList.add('bg-gray-400');
                }
            }
        }

        function requestNotificationPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        showToast('üîî', 'Notifications Enabled', '‡§Ö‡§¨ ‡§Ü‡§™‡§ï‡•ã status updates ‡§Æ‡§ø‡§≤‡•á‡§Ç‡§ó‡•á!');
                        checkNotificationStatus();
                    }
                });
            } else {
                alert('‡§Ü‡§™‡§ï‡§æ browser notifications support ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ');
            }
        }

        function sendNotification(title, body) {
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification(title, { body, icon: 'üè•' });
            }
        }

        function showToast(icon, title, message) {
            document.getElementById('toastIcon').textContent = icon;
            document.getElementById('toastTitle').textContent = title;
            document.getElementById('toastMessage').textContent = message;
            document.getElementById('notificationToast').classList.remove('translate-x-full');
            
            setTimeout(hideToast, 5000);
        }

        function hideToast() {
            document.getElementById('notificationToast').classList.add('translate-x-full');
        }

        // User Settings
        function openUserSettings() {
            document.getElementById('userSettingsModal').classList.remove('hidden');
        }

        function closeUserSettings() {
            document.getElementById('userSettingsModal').classList.add('hidden');
        }

        // Time Slots
        function updateTimeSlots(clinic) {
            const timeSelect = document.getElementById('appointmentTime');
            timeSelect.innerHTML = '';
            
            if (clinic === 'vinay_khand') {
                timeSelect.innerHTML = `
                    <option value="">-- ‡§∏‡§Æ‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç --</option>
                    <option value="10:00 AM">10:00 AM</option>
                    <option value="10:30 AM">10:30 AM</option>
                    <option value="11:00 AM">11:00 AM</option>
                    <option value="11:30 AM">11:30 AM</option>
                    <option value="12:00 PM">12:00 PM</option>
                    <option value="12:30 PM">12:30 PM</option>
                `;
            } else if (clinic === 'vibhav_khand') {
                timeSelect.innerHTML = `
                    <option value="">-- ‡§∏‡§Æ‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç --</option>
                    <option value="4:00 PM">4:00 PM</option>
                    <option value="4:30 PM">4:30 PM</option>
                    <option value="5:00 PM">5:00 PM</option>
                    <option value="5:30 PM">5:30 PM</option>
                    <option value="6:00 PM">6:00 PM</option>
                    <option value="6:30 PM">6:30 PM</option>
                `;
            }
        }

        function checkDateValidity() {
            const dateInput = document.getElementById('appointmentDate');
            const warning = document.getElementById('dayWarning');
            const selectedClinic = document.querySelector('input[name="clinicSelect"]:checked');
            
            if (!dateInput.value || !selectedClinic) {
                warning.classList.add('hidden');
                return true;
            }
            
            const selectedDate = new Date(dateInput.value);
            const dayOfWeek = selectedDate.getDay();
            
            if (selectedClinic.value === 'vinay_khand' && dayOfWeek === 3) {
                warning.textContent = '‚ö†Ô∏è Wednesday ‡§ï‡•ã Vinay Khand Clinic ‡§¨‡§Ç‡§¶ ‡§∞‡§π‡§§‡•Ä ‡§π‡•à‡•§';
                warning.classList.remove('hidden');
                return false;
            } else if (selectedClinic.value === 'vibhav_khand' && dayOfWeek === 0) {
                warning.textContent = '‚ö†Ô∏è Sunday ‡§ï‡•ã Vibhav Khand Clinic ‡§¨‡§Ç‡§¶ ‡§∞‡§π‡§§‡•Ä ‡§π‡•à‡•§';
                warning.classList.remove('hidden');
                return false;
            }
            
            warning.classList.add('hidden');
            return true;
        }

        document.getElementById('appointmentDate').addEventListener('change', checkDateValidity);

        // Section Navigation
        function showSection(section) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-purple-600', 'text-white');
                btn.classList.add('bg-white', 'text-gray-700');
            });
            
            document.getElementById('bookingSection').classList.add('hidden');
            document.getElementById('statusSection').classList.add('hidden');
            document.getElementById('myAppointmentsSection').classList.add('hidden');
            document.getElementById('gallerySection').classList.add('hidden');
            document.getElementById('aboutSection').classList.add('hidden');
            
            const tabId = section === 'myAppointments' ? 'tabMyAppointments' : `tab${section.charAt(0).toUpperCase() + section.slice(1)}`;
            const sectionId = `${section}Section`;
            
            document.getElementById(tabId).classList.remove('bg-white', 'text-gray-700');
            document.getElementById(tabId).classList.add('bg-purple-600', 'text-white');
            document.getElementById(sectionId).classList.remove('hidden');
        }

        // Gallery
        function showGalleryTab(tab) {
            document.querySelectorAll('.gallery-tab').forEach(btn => {
                btn.classList.remove('bg-purple-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            document.querySelectorAll('.gallery-content').forEach(el => el.classList.add('hidden'));
            
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-purple-600', 'text-white');
            
            document.getElementById(`gallery${tab.charAt(0).toUpperCase() + tab.slice(1)}`).classList.remove('hidden');
        }

        function loadGalleryPhotos() {
            ['doctor', 'clinic', 'staff', 'area'].forEach(type => {
                renderGalleryGrid(type);
            });
        }

        function renderGalleryGrid(type) {
            const photos = galleryPhotos[type] || [];
            const gridId = `${type}PhotosGrid`;
            const grid = document.getElementById(gridId);
            
            if (!grid) return;
            
            if (photos.length === 0) {
                const icons = { doctor: 'üë®‚Äç‚öïÔ∏è', clinic: 'üè•', staff: 'üë•', area: 'üìç' };
                grid.innerHTML = `
                    <div class="text-center text-gray-500 col-span-full py-8">
                        <span class="text-4xl">${icons[type]}</span>
                        <p class="mt-2">${type.charAt(0).toUpperCase() + type.slice(1)} photos ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§è‡§Ç‡§ó‡•Ä</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = photos.map((photo, index) => `
                <div class="photo-item" onclick="openLightbox('${type}', ${index})">
                    <img src="${photo}" alt="${type} photo">
                    <div class="photo-overlay">
                        <button class="text-white text-sm bg-white/20 px-3 py-1 rounded">View</button>
                    </div>
                </div>
            `).join('');
        }

        // Lightbox
        function openLightbox(type, index) {
            currentLightboxPhotos = galleryPhotos[type] || [];
            currentLightboxIndex = index;
            
            document.getElementById('lightboxImg').src = currentLightboxPhotos[index];
            document.getElementById('lightbox').classList.add('active');
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
        }

        function prevPhoto() {
            currentLightboxIndex = (currentLightboxIndex - 1 + currentLightboxPhotos.length) % currentLightboxPhotos.length;
            document.getElementById('lightboxImg').src = currentLightboxPhotos[currentLightboxIndex];
        }

        function nextPhoto() {
            currentLightboxIndex = (currentLightboxIndex + 1) % currentLightboxPhotos.length;
            document.getElementById('lightboxImg').src = currentLightboxPhotos[currentLightboxIndex];
        }

        function downloadPhoto() {
            const link = document.createElement('a');
            link.href = currentLightboxPhotos[currentLightboxIndex];
            link.download = `laxmi_clinic_photo_${Date.now()}.jpg`;
            link.click();
        }

        // Upload Gallery Photo
        function uploadGalleryPhoto(type) {
            const input = document.getElementById(`upload${type.charAt(0).toUpperCase() + type.slice(1)}Photo`);
            const files = input.files;
            
            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    galleryPhotos[type].push(e.target.result);
                    localStorage.setItem('laxmiClinicGallery', JSON.stringify(galleryPhotos));
                    renderManagerGalleryList(type);
                    loadGalleryPhotos();
                };
                reader.readAsDataURL(file);
            });
            
            input.value = '';
            showToast('üì∏', 'Uploaded!', 'Photos added to gallery');
        }

        function renderManagerGalleryList(type) {
            const photos = galleryPhotos[type] || [];
            const listId = `${type}PhotosList`;
            const list = document.getElementById(listId);
            
            if (!list) return;
            
            list.innerHTML = photos.map((photo, index) => `
                <div class="photo-item relative">
                    <img src="${photo}" alt="${type} photo">
                    <button onclick="deleteGalleryPhoto('${type}', ${index})" class="absolute top-1 right-1 bg-red-500 text-white w-6 h-6 rounded-full text-xs">‚úï</button>
                </div>
            `).join('');
        }

        function deleteGalleryPhoto(type, index) {
            galleryPhotos[type].splice(index, 1);
            localStorage.setItem('laxmiClinicGallery', JSON.stringify(galleryPhotos));
            renderManagerGalleryList(type);
            loadGalleryPhotos();
            showToast('üóëÔ∏è', 'Deleted!', 'Photo removed');
        }

        // Send Photo to Manager
        function sendPhotoToManager() {
            const name = document.getElementById('senderName').value;
            const mobile = document.getElementById('senderMobile').value;
            const message = document.getElementById('photoMessage').value;
            const files = document.getElementById('sendPhotoFile').files;
            
            if (!name || !mobile || files.length === 0) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§æ‡§Æ, mobile ‡§î‡§∞ photo ‡§°‡§æ‡§≤‡•á‡§Ç');
                return;
            }
            
            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    patientPhotos.push({
                        id: 'PH' + Date.now(),
                        name,
                        mobile,
                        message,
                        photo: e.target.result,
                        date: new Date().toISOString()
                    });
                    localStorage.setItem('laxmiClinicPatientPhotos', JSON.stringify(patientPhotos));
                };
                reader.readAsDataURL(file);
            });
            
            showToast('üì§', 'Sent!', 'Photo Manager ‡§ï‡•ã ‡§≠‡•á‡§ú ‡§¶‡•Ä ‡§ó‡§à');
            sendNotification('üì∏ New Photo', `${name} ‡§®‡•á photo ‡§≠‡•á‡§ú‡•Ä ‡§π‡•à`);
            
            document.getElementById('senderName').value = '';
            document.getElementById('senderMobile').value = '';
            document.getElementById('photoMessage').value = '';
            document.getElementById('sendPhotoFile').value = '';
            document.getElementById('sendPhotoPreview').innerHTML = '';
        }

        // Send Photo to Patient
        function sendPhotoToPatient() {
            const mobile = document.getElementById('sendToPatientMobile').value;
            const message = document.getElementById('sendToPatientMessage').value;
            const files = document.getElementById('sendToPatientFile').files;
            
            if (!mobile || files.length === 0) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ mobile number ‡§î‡§∞ photo ‡§°‡§æ‡§≤‡•á‡§Ç');
                return;
            }
            
            // For now, just show success - in real app would send via WhatsApp
            const whatsappMsg = `üè• *Laxmi Clinic*%0A${message ? message : 'Photo attached'}`;
            window.open(`https://wa.me/91${mobile}?text=${whatsappMsg}`, '_blank');
            
            showToast('üì§', 'Opened WhatsApp!', 'Photo manually attach ‡§ï‡§∞‡•á‡§Ç');
            
            document.getElementById('sendToPatientMobile').value = '';
            document.getElementById('sendToPatientMessage').value = '';
            document.getElementById('sendToPatientFile').value = '';
        }

        // Appointment Form Submit
        document.getElementById('appointmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!checkDateValidity()) {
                alert('‚ö†Ô∏è ‡§ï‡•É‡§™‡§Ø‡§æ clinic ‡§ï‡•Ä ‡§õ‡•Å‡§ü‡•ç‡§ü‡•Ä ‡§µ‡§æ‡§≤‡•á ‡§¶‡§ø‡§® ‡§ï‡•á ‡§Ö‡§≤‡§æ‡§µ‡§æ ‡§ï‡•ã‡§à ‡§î‡§∞ date ‡§ö‡•Å‡§®‡•á‡§Ç‡•§');
                return;
            }
            
            const selectedClinic = document.querySelector('input[name="clinicSelect"]:checked');
            const clinicName = selectedClinic.value === 'vinay_khand' ? 'Vinay Khand (Morning)' : 'Vibhav Khand (Evening)';
            const clinicAddress = selectedClinic.value === 'vinay_khand' ? clinicData.clinic1.address : clinicData.clinic2.address;
            
            // Get photo if attached
            let photos = [];
            const photoFiles = document.getElementById('patientPhoto').files;
            
            const appointment = {
                id: 'LX' + Date.now().toString().slice(-6),
                name: document.getElementById('patientName').value,
                mobile: document.getElementById('patientMobile').value,
                clinic: selectedClinic.value,
                clinicName: clinicName,
                clinicAddress: clinicAddress,
                date: document.getElementById('appointmentDate').value,
                time: document.getElementById('appointmentTime').value,
                problem: document.getElementById('patientProblem').value,
                photos: [],
                status: 'pending',
                note: '',
                createdAt: new Date().toISOString()
            };

            // Handle photos
            if (photoFiles.length > 0) {
                let loaded = 0;
                Array.from(photoFiles).forEach(file => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        appointment.photos.push(e.target.result);
                        loaded++;
                        if (loaded === photoFiles.length) {
                            saveAppointment(appointment, clinicName, clinicAddress);
                        }
                    };
                    reader.readAsDataURL(file);
                });
            } else {
                saveAppointment(appointment, clinicName, clinicAddress);
            }
        });

        function saveAppointment(appointment, clinicName, clinicAddress) {
            appointments.push(appointment);
            localStorage.setItem('laxmiClinicAppointments', JSON.stringify(appointments));
            
            // Show success modal
            document.getElementById('bookingId').textContent = appointment.id;
            document.getElementById('successClinicInfo').innerHTML = `üè• ${clinicName}<br>üìç ${clinicAddress}`;
            document.getElementById('successModal').classList.remove('hidden');
            
            // Send notification
            showToast('üìÖ', 'New Appointment!', `${appointment.name} ‡§®‡•á appointment book ‡§ï‡§ø‡§Ø‡§æ`);
            sendNotification('üìÖ New Appointment', `${appointment.name} - ${clinicName}`);
            
            // Reset form
            document.getElementById('appointmentForm').reset();
            document.getElementById('appointmentDate').min = new Date().toISOString().split('T')[0];
            document.getElementById('appointmentTime').innerHTML = '<option value="">-- ‡§™‡§π‡§≤‡•á Clinic ‡§ö‡•Å‡§®‡•á‡§Ç --</option>';
            document.getElementById('dayWarning').classList.add('hidden');
            document.getElementById('patientPhotoPreview').innerHTML = '';
        }

        // Check Status
        function checkStatus() {
            const mobile = document.getElementById('checkMobile').value;
            const resultDiv = document.getElementById('statusResult');
            
            if (!mobile || mobile.length !== 10) {
                resultDiv.innerHTML = '<div class="p-4 bg-red-100 text-red-700 rounded-xl">‡§ï‡•É‡§™‡§Ø‡§æ valid 10 digit mobile number ‡§°‡§æ‡§≤‡•á‡§Ç</div>';
                resultDiv.classList.remove('hidden');
                return;
            }
            
            const userAppointments = appointments.filter(apt => apt.mobile === mobile);
            
            if (userAppointments.length === 0) {
                resultDiv.innerHTML = '<div class="p-4 bg-yellow-100 text-yellow-700 rounded-xl">‡§á‡§∏ number ‡§∏‡•á ‡§ï‡•ã‡§à appointment ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä</div>';
            } else {
                let html = '<div class="space-y-3">';
                userAppointments.reverse().forEach(apt => {
                    let statusColor, statusText, statusIcon;
                    switch(apt.status) {
                        case 'approved':
                            statusColor = 'bg-green-100 border-green-500 text-green-700';
                            statusText = '‚úÖ Approved';
                            statusIcon = 'üéâ';
                            break;
                        case 'rejected':
                            statusColor = 'bg-red-100 border-red-500 text-red-700';
                            statusText = '‚ùå Rejected';
                            statusIcon = 'üòî';
                            break;
                        default:
                            statusColor = 'bg-yellow-100 border-yellow-500 text-yellow-700';
                            statusText = '‚è≥ Pending';
                            statusIcon = '‚åõ';
                    }
                    
                    html += `
                        <div class="p-4 ${statusColor} border-l-4 rounded-xl">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="font-bold">${statusIcon} ${apt.name}</p>
                                    <p class="text-sm">üè• ${apt.clinicName || 'Clinic'}</p>
                                    <p class="text-sm">üìÖ ${apt.date} | ‚è∞ ${apt.time}</p>
                                    <p class="text-sm">ID: ${apt.id}</p>
                                    ${apt.note ? `<div class="mt-2 p-2 bg-yellow-200 border-2 border-yellow-400 rounded-lg text-sm font-medium"><strong>üìå ${apt.status === 'approved' ? 'Important Note' : 'Reason'}:</strong> ${apt.note}</div>` : ''}
                                </div>
                                <span class="font-bold text-sm">${statusText}</span>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
                resultDiv.innerHTML = html;
            }
            
            resultDiv.classList.remove('hidden');
        }

        // My Appointments
        function loadMyAppointments() {
            const mobile = document.getElementById('myAppointmentsMobile').value;
            const listDiv = document.getElementById('myAppointmentsList');
            
            if (!mobile || mobile.length !== 10) {
                listDiv.innerHTML = '<div class="p-4 bg-red-100 text-red-700 rounded-xl">‡§ï‡•É‡§™‡§Ø‡§æ valid 10 digit mobile number ‡§°‡§æ‡§≤‡•á‡§Ç</div>';
                return;
            }
            
            const userAppointments = appointments.filter(apt => apt.mobile === mobile);
            
            if (userAppointments.length === 0) {
                listDiv.innerHTML = '<div class="p-4 bg-yellow-100 text-yellow-700 rounded-xl">‡§á‡§∏ number ‡§∏‡•á ‡§ï‡•ã‡§à appointment ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä</div>';
                return;
            }
            
            let html = '';
            [...userAppointments].reverse().forEach(apt => {
                let statusBadge;
                switch(apt.status) {
                    case 'approved':
                        statusBadge = '<span class="bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs">‚úÖ Approved</span>';
                        break;
                    case 'rejected':
                        statusBadge = '<span class="bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs">‚ùå Rejected</span>';
                        break;
                    default:
                        statusBadge = '<span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs">‚è≥ Pending</span>';
                }
                
                html += `
                    <div class="p-4 bg-gray-50 rounded-xl">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <p class="font-bold text-gray-800">${apt.name}</p>
                                <p class="text-sm text-gray-600">ID: ${apt.id}</p>
                            </div>
                            ${statusBadge}
                        </div>
                        <p class="text-sm text-gray-600">üè• ${apt.clinicName}</p>
                        <p class="text-sm text-gray-600">üìÖ ${apt.date} | ‚è∞ ${apt.time}</p>
                        ${apt.note ? `<div class="mt-2 p-2 bg-yellow-100 border-2 border-yellow-300 rounded-lg text-sm font-medium"><strong>üìå ${apt.status === 'approved' ? 'Important Note' : 'Reason'}:</strong> ${apt.note}</div>` : ''}
                        ${apt.status === 'pending' ? `
                            <button onclick="openEditModal('${apt.id}')" class="mt-3 w-full bg-purple-100 text-purple-700 py-2 rounded-lg text-sm font-medium hover:bg-purple-200 transition">
                                ‚úèÔ∏è Edit Appointment
                            </button>
                        ` : ''}
                    </div>
                `;
            });
            
            listDiv.innerHTML = html;
        }

        // Edit Appointment Modal
        function openEditModal(id) {
            const apt = appointments.find(a => a.id === id);
            if (!apt || apt.status !== 'pending') return;
            
            document.getElementById('editAppointmentId').value = apt.id;
            document.getElementById('editName').value = apt.name;
            document.getElementById('editDate').value = apt.date;
            document.getElementById('editTime').value = apt.time;
            document.getElementById('editProblem').value = apt.problem || '';
            
            document.getElementById('editAppointmentModal').classList.remove('hidden');
        }

        function closeEditModal() {
            document.getElementById('editAppointmentModal').classList.add('hidden');
        }

        document.getElementById('editAppointmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = document.getElementById('editAppointmentId').value;
            const index = appointments.findIndex(a => a.id === id);
            
            if (index !== -1) {
                appointments[index].name = document.getElementById('editName').value;
                appointments[index].date = document.getElementById('editDate').value;
                appointments[index].time = document.getElementById('editTime').value;
                appointments[index].problem = document.getElementById('editProblem').value;
                
                localStorage.setItem('laxmiClinicAppointments', JSON.stringify(appointments));
                
                showToast('‚úÖ', 'Updated!', 'Appointment details updated successfully');
                closeEditModal();
                loadMyAppointments();
            }
        });

        // Manager Login
        function showManagerLogin() {
            document.getElementById('managerLoginModal').classList.remove('hidden');
        }

        function closeManagerLogin() {
            document.getElementById('managerLoginModal').classList.add('hidden');
            document.getElementById('managerPassword').value = '';
        }

        function loginManager() {
            const password = document.getElementById('managerPassword').value;
            if (password === clinicData.password) {
                closeManagerLogin();
                openManagerDashboard();
            } else {
                alert('‚ùå ‡§ó‡§≤‡§§ Password!');
            }
        }

        // Manager Dashboard
        function openManagerDashboard() {
            document.getElementById('managerDashboard').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            loadAppointments();
            loadSettings();
            loadPatientPhotosList();
            updatePatientStats();
            ['doctor', 'clinic', 'staff', 'area'].forEach(type => renderManagerGalleryList(type));
        }

        function closeManagerDashboard() {
            document.getElementById('managerDashboard').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function showDashboardTab(tab) {
            document.querySelectorAll('.dash-tab').forEach(btn => {
                btn.classList.remove('bg-purple-600', 'text-white');
                btn.classList.add('bg-white', 'text-gray-700');
            });
            
            document.getElementById('appointmentsTab').classList.add('hidden');
            document.getElementById('photosTab').classList.add('hidden');
            document.getElementById('patientPhotosTab').classList.add('hidden');
            document.getElementById('broadcastTab').classList.add('hidden');
            document.getElementById('settingsTab').classList.add('hidden');
            document.getElementById('clinicFilter').classList.add('hidden');
            
            const tabId = `dashTab${tab.charAt(0).toUpperCase() + tab.slice(1)}`;
            document.getElementById(tabId).classList.remove('bg-white', 'text-gray-700');
            document.getElementById(tabId).classList.add('bg-purple-600', 'text-white');
            document.getElementById(`${tab}Tab`).classList.remove('hidden');
            
            if (tab === 'appointments') {
                document.getElementById('clinicFilter').classList.remove('hidden');
            }
        }

        function loadPatientPhotosList() {
            const list = document.getElementById('patientPhotosList');
            
            if (patientPhotos.length === 0) {
                list.innerHTML = '<p class="text-gray-500 text-center py-8">‡§ï‡•ã‡§à photo ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§à ‡§π‡•à</p>';
                return;
            }
            
            list.innerHTML = [...patientPhotos].reverse().map(p => `
                <div class="p-4 bg-gray-50 rounded-xl">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <p class="font-bold">${p.name}</p>
                            <p class="text-sm text-gray-600">üì± ${p.mobile}</p>
                            <p class="text-xs text-gray-400">${new Date(p.date).toLocaleString()}</p>
                        </div>
                        <a href="tel:${p.mobile}" class="bg-green-500 text-white px-3 py-1 rounded-lg text-sm">üìû Call</a>
                    </div>
                    ${p.message ? `<p class="text-sm text-gray-700 mb-2">${p.message}</p>` : ''}
                    <img src="${p.photo}" alt="Patient photo" class="w-full max-w-xs rounded-lg cursor-pointer" onclick="window.open('${p.photo}', '_blank')">
                    <div class="flex gap-2 mt-2">
                        <a href="${p.photo}" download="patient_${p.id}.jpg" class="bg-blue-500 text-white px-3 py-1 rounded text-sm">‚¨áÔ∏è Download</a>
                        <button onclick="deletePatientPhoto('${p.id}')" class="bg-red-500 text-white px-3 py-1 rounded text-sm">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function deletePatientPhoto(id) {
            patientPhotos = patientPhotos.filter(p => p.id !== id);
            localStorage.setItem('laxmiClinicPatientPhotos', JSON.stringify(patientPhotos));
            loadPatientPhotosList();
            showToast('üóëÔ∏è', 'Deleted!', 'Photo deleted');
        }

        function filterAppointments(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-purple-600', 'text-white');
                btn.classList.add('bg-white', 'text-gray-700');
            });
            event.target.classList.remove('bg-white', 'text-gray-700');
            event.target.classList.add('bg-purple-600', 'text-white');
            loadAppointments();
        }

        function loadAppointments() {
            const listDiv = document.getElementById('appointmentsList');
            
            let filteredAppointments = [...appointments];
            if (currentFilter !== 'all') {
                filteredAppointments = appointments.filter(apt => apt.clinic === currentFilter);
            }
            
            if (filteredAppointments.length === 0) {
                listDiv.innerHTML = '<div class="bg-white p-8 rounded-2xl text-center text-gray-500">‡§ï‡•ã‡§à appointment ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à</div>';
                return;
            }
            
            const sortedAppointments = [...filteredAppointments].reverse();
            
            let html = '';
            sortedAppointments.forEach((apt) => {
                let statusBadge;
                switch(apt.status) {
                    case 'approved':
                        statusBadge = '<span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">‚úÖ Approved</span>';
                        break;
                    case 'rejected':
                        statusBadge = '<span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm font-medium">‚ùå Rejected</span>';
                        break;
                    default:
                        statusBadge = '<span class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-sm font-medium pulse-dot">‚è≥ Pending</span>';
                }

                const clinicBadge = apt.clinic === 'vinay_khand' 
                    ? '<span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs">Vinay Khand</span>'
                    : '<span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs">Vibhav Khand</span>';
                
                html += `
                    <div class="bg-white p-5 rounded-2xl card-shadow">
                        <div class="flex flex-wrap justify-between items-start gap-4 mb-4">
                            <div>
                                <h4 class="text-lg font-bold text-gray-800">üë§ ${apt.name}</h4>
                                <p class="text-gray-600">üì± <a href="tel:${apt.mobile}" class="text-blue-600 hover:underline">${apt.mobile}</a></p>
                                <div class="mt-1">${clinicBadge}</div>
                            </div>
                            ${statusBadge}
                        </div>
                        <div class="grid grid-cols-2 gap-3 mb-4">
                            <div class="bg-gray-50 p-3 rounded-lg">
                                <p class="text-sm text-gray-500">üìÖ Date</p>
                                <p class="font-medium">${apt.date}</p>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                                <p class="text-sm text-gray-500">‚è∞ Time</p>
                                <p class="font-medium">${apt.time}</p>
                            </div>
                        </div>
                        ${apt.problem ? `<div class="bg-blue-50 p-3 rounded-lg mb-4"><p class="text-sm text-gray-500">üìù Problem</p><p class="text-gray-700">${apt.problem}</p></div>` : ''}
                        ${apt.photos && apt.photos.length > 0 ? `
                            <div class="mb-4">
                                <p class="text-sm text-gray-500 mb-2">üì∑ Attached Photos</p>
                                <div class="flex gap-2 flex-wrap">
                                    ${apt.photos.map(photo => `<img src="${photo}" class="w-16 h-16 object-cover rounded-lg cursor-pointer" onclick="window.open('${photo}', '_blank')">`).join('')}
                                </div>
                            </div>
                        ` : ''}
                        ${apt.note ? `<div class="bg-yellow-100 border-2 border-yellow-400 p-3 rounded-lg mb-4"><p class="text-sm text-gray-500">üìå ${apt.status === 'approved' ? 'Important Note' : 'Rejection Reason'}</p><p class="text-gray-800 font-bold">${apt.note}</p></div>` : ''}
                        <div class="text-xs text-gray-400 mb-3">ID: ${apt.id}</div>
                        ${apt.status === 'pending' ? `
                            <div class="flex gap-3">
                                <button onclick="openActionModal('${apt.id}', 'approve')" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg font-medium transition">
                                    ‚úÖ Approve
                                </button>
                                <button onclick="openActionModal('${apt.id}', 'reject')" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg font-medium transition">
                                    ‚ùå Reject
                                </button>
                            </div>
                        ` : `
                            <a href="https://wa.me/91${apt.mobile}" target="_blank" class="block text-center bg-green-100 text-green-700 py-2 rounded-lg font-medium hover:bg-green-200 transition">
                                üí¨ WhatsApp ‡§ï‡§∞‡•á‡§Ç
                            </a>
                        `}
                    </div>
                `;
            });
            
            listDiv.innerHTML = html;
        }

        // Action Modal (Approve/Reject with note)
        function openActionModal(id, type) {
            currentAction = { id, type };
            
            if (type === 'approve') {
                document.getElementById('actionModalTitle').textContent = '‚úÖ Approve Appointment';
                document.getElementById('actionModalLabel').textContent = 'üìå Important Note (Optional) - Highlighted ‡§∞‡§π‡•á‡§ó‡§æ';
                document.getElementById('actionNote').placeholder = '‡§ú‡•à‡§∏‡•á: ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•Å‡§¨‡§π ‡§ñ‡§æ‡§≤‡•Ä ‡§™‡•á‡§ü ‡§Ü‡§è‡§Ç, Reports ‡§∏‡§æ‡§• ‡§≤‡§æ‡§è‡§Ç...';
                document.getElementById('actionModalBtn').classList.remove('bg-red-500', 'hover:bg-red-600');
                document.getElementById('actionModalBtn').classList.add('bg-green-500', 'hover:bg-green-600');
            } else {
                document.getElementById('actionModalTitle').textContent = '‚ùå Reject Appointment';
                document.getElementById('actionModalLabel').textContent = 'üìù Rejection Reason - Patient ‡§ï‡•ã ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ';
                document.getElementById('actionNote').placeholder = '‡§ú‡•à‡§∏‡•á: ‡§â‡§∏ ‡§¶‡§ø‡§® clinic ‡§¨‡§Ç‡§¶ ‡§π‡•à, Doctor unavailable...';
                document.getElementById('actionModalBtn').classList.remove('bg-green-500', 'hover:bg-green-600');
                document.getElementById('actionModalBtn').classList.add('bg-red-500', 'hover:bg-red-600');
            }
            
            document.getElementById('actionNote').value = '';
            document.getElementById('actionModal').classList.remove('hidden');
        }

        function closeActionModal() {
            document.getElementById('actionModal').classList.add('hidden');
            currentAction = { type: '', id: '' };
        }

        function confirmAction() {
            const note = document.getElementById('actionNote').value;
            const status = currentAction.type === 'approve' ? 'approved' : 'rejected';
            
            const index = appointments.findIndex(apt => apt.id === currentAction.id);
            if (index !== -1) {
                appointments[index].status = status;
                appointments[index].note = note;
                localStorage.setItem('laxmiClinicAppointments', JSON.stringify(appointments));
                
                // Send notification to patient
                const apt = appointments[index];
                sendNotification(
                    status === 'approved' ? '‚úÖ Appointment Approved!' : '‚ùå Appointment Rejected',
                    `${apt.name} - ${apt.clinicName}`
                );
                
                showToast(
                    status === 'approved' ? '‚úÖ' : '‚ùå',
                    status === 'approved' ? 'Approved!' : 'Rejected!',
                    `${apt.name} ‡§ï‡•Ä appointment ${status}`
                );
                
                closeActionModal();
                loadAppointments();
            }
        }

        // Broadcast
        function updatePatientStats() {
            const uniqueMobiles = [...new Set(appointments.map(apt => apt.mobile))];
            document.getElementById('totalPatients').textContent = uniqueMobiles.length;
        }

        function sendBroadcastNotification() {
            const title = document.getElementById('broadcastTitle').value;
            const message = document.getElementById('broadcastMessage').value;
            
            if (!title || !message) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ Title ‡§î‡§∞ Message ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§≠‡§∞‡•á‡§Ç');
                return;
            }
            
            const uniqueMobiles = [...new Set(appointments.map(apt => apt.mobile))];
            
            if (uniqueMobiles.length === 0) {
                alert('‡§ï‡•ã‡§à patient ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à');
                return;
            }
            
            // Send browser notification
            sendNotification(title, message);
            
            showToast('üì¢', 'Broadcast Sent!', `${uniqueMobiles.length} patients ‡§ï‡•ã notification ‡§≠‡•á‡§ú ‡§¶‡§ø‡§Ø‡§æ`);
            
            // Clear form
            document.getElementById('broadcastTitle').value = '';
            document.getElementById('broadcastMessage').value = '';
        }

        // Settings
        function loadSettings() {
            document.getElementById('settingDoctorName').value = clinicData.doctorName;
            document.getElementById('settingQualification').value = clinicData.qualification;
            document.getElementById('settingSpecialization').value = clinicData.specialization;
            document.getElementById('settingAbout').value = clinicData.about;
            document.getElementById('settingDoctorMobile').value = clinicData.doctorMobile || '';
            document.getElementById('settingAddress1').value = clinicData.clinic1.address;
            document.getElementById('settingTiming1').value = clinicData.clinic1.timing;
            document.getElementById('settingOff1').value = clinicData.clinic1.offDay;
            document.getElementById('settingMap1').value = clinicData.clinic1.mapUrl || '';
            document.getElementById('settingAddress2').value = clinicData.clinic2.address;
            document.getElementById('settingTiming2').value = clinicData.clinic2.timing;
            document.getElementById('settingOff2').value = clinicData.clinic2.offDay;
            document.getElementById('settingMap2').value = clinicData.clinic2.mapUrl || '';
            document.getElementById('settingHelpline').value = clinicData.helpline;
            document.getElementById('settingClinicContact').value = clinicData.clinicContact || '';
            document.getElementById('settingEmail').value = clinicData.email || '';
        }

        document.getElementById('settingsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            clinicData.doctorName = document.getElementById('settingDoctorName').value;
            clinicData.qualification = document.getElementById('settingQualification').value;
            clinicData.specialization = document.getElementById('settingSpecialization').value;
            clinicData.about = document.getElementById('settingAbout').value;
            clinicData.doctorMobile = document.getElementById('settingDoctorMobile').value;
            clinicData.clinic1.address = document.getElementById('settingAddress1').value;
            clinicData.clinic1.timing = document.getElementById('settingTiming1').value;
            clinicData.clinic1.offDay = document.getElementById('settingOff1').value;
            clinicData.clinic1.mapUrl = document.getElementById('settingMap1').value;
            clinicData.clinic2.address = document.getElementById('settingAddress2').value;
            clinicData.clinic2.timing = document.getElementById('settingTiming2').value;
            clinicData.clinic2.offDay = document.getElementById('settingOff2').value;
            clinicData.clinic2.mapUrl = document.getElementById('settingMap2').value;
            clinicData.helpline = document.getElementById('settingHelpline').value;
            clinicData.clinicContact = document.getElementById('settingClinicContact').value;
            clinicData.email = document.getElementById('settingEmail').value;
            
            const newPassword = document.getElementById('settingPassword').value;
            if (newPassword) {
                clinicData.password = newPassword;
            }
            
            localStorage.setItem('laxmiClinicData', JSON.stringify(clinicData));
            
            showToast('‚úÖ', 'Saved!', 'Settings saved successfully');
            updateUIFromData();
            updateClinicOptions();
        });

        function closeSuccessModal() {
            document.getElementById('successModal').classList.add('hidden');
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeManagerLogin();
                closeSuccessModal();
                closeUserSettings();
                closeEditModal();
                closeActionModal();
                closeLightbox();
            }
        });

        document.getElementById('managerPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') loginManager();
        });
    </script>
</body>
</html>
